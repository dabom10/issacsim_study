# 두산로봇 패키지 분석 & Digital Twin / Isaac Sim 정리

## 1. 교육 및 프로젝트 개요
- **활용 기술**
  - Digital Twin(DT) 산업 활용
  - NVIDIA Omniverse / Isaac Sim
  - SLAM, 로봇 Arm 제어
  - 공정 자동화
  - 실무 중심 프로젝트 수행

- **일정**
  - 4일차: 주제 선정
  - 5일차: 주제 발표
  - 평가 기준: 목적 및 목표 달성 여부(구체성 중점)

- **발표 구성**
  - 조별 총 30분
    - 발표 10분
    - 질의응답 5분
    - 시연 10분
    - 질의응답 5분
  - 발표용 과도한 환경 연출은 제거하고 핵심 위주로 시연

---

## 2. DX / DT / CPS 개념 정리

### 2.1 DX vs DT
- **DX (Digital Transformation)**
  - 센서 데이터를 디지털화하여 수집·관리
  - DT의 하위 개념

- **DT (Digital Twin)**
  - 실제 시스템의 가상 복제본
  - 사람 개입 없이 데이터 기반으로 효율성 판단
  - 시뮬레이션 결과를 통해 의사결정 지원

### 2.2 CPS (Cyber Physical System)
- 실시간 데이터를 기반으로 **가상 시스템 + 실제 공정 제어**
- DT 결과를 실제 시스템에 피드백
- 예시:
  - 스마트팩토리
  - 자율주행차
  - 스마트 그리드

> 개념 관계  
> **DT + 실제 공정 제어 = CPS**  
> **DT + AI = Physical AI**

---

## 3. DT 활용 사례

### 3.1 스마트 시티
- 교통량 분석 기반 신호등 제어
- 우회로 안내
- 자율주행차 관제
- V2V / V2X 통신을 통한 실시간 도로 상황 DT 구성

### 3.2 재난 대응
- 화재 시 연기·불길 확산 시뮬레이션 → 대피 경로 안내
- 집중호우 시 침수 예측 → 대피 경보 및 펌프장 제어
- CCTV 기반 이상행동 감지 → 경찰/구조 대응

### 3.3 도시 계획
- 건물별 에너지 소비량 분석
- 에너지 효율 개선 시뮬레이션

---

## 4. NVIDIA Omniverse & Isaac Sim 구조

### 4.1 Omniverse
- Digital Twin을 위한 **플랫폼**
- DT 자체 구현 가능
- 로봇 시뮬레이션까지 필요할 경우 Isaac Sim 활용

### 4.2 Isaac Sim
- Omniverse 기반 로봇 전용 시뮬레이션 애플리케이션
- 주요 기능:
  - 로봇 제어 및 센서 시뮬레이션
  - AI 학습 (강화학습 포함)
  - 합성 데이터(SDG) 생성
  - Domain Randomization을 통한 현실 강건성 확보
  - Sim-to-Real 파이프라인

> 로봇을 사용하지 않는 DT → Omniverse  
> 로봇 포함 DT → Isaac Sim

---

## 5. 핵심 기술 요소

### 5.1 USD (Universal Scene Description)
- 물리적 환경 정보 포함 가능
- Layer 구조 지원 → 원본 수정 없이 override 가능
- USD 파일 주소를 참조하여 Scene 구성

### 5.2 RTX Rendering
- 광원, 반사, 굴절 등 물리 기반 렌더링
- 고현실성 그래픽 구현

### 5.3 PhysX 5
- 물리 엔진
- 충돌, 관절, 강체 동역학 시뮬레이션

---

## 6. Isaac Sim vs 다른 시뮬레이터

| 구분 | 특징 |
|----|----|
| MuJoCo | 강화학습 특화, 경량, 100% 코드 기반(Gazebo에서 MuJoCo로 넘어가는 사람들 많다고 하심), 그래픽 최하 |
| Gazebo | ROS 친화적, 안정성은 제한적 |
| Isaac Sim | 고퀄리티 DT + 로봇 시뮬, 리소스 요구 높음 |
DT 중시 → Isaac Sim 선택
강화학습 중시 → MuJoCo 선택

- Isaac Sim 5.0
  - Python 3.11
  - ROS2 Python 3.10과 버전 충돌 → Docker 사용 권장 → Nvidia에서 제공(Docker 설치는 해야 함)
- 주 사용 분야
  - 매니퓰레이터
  - AMR
  - 휴머노이드

---

## 7. Isaac Sim 기본 작업 흐름

1. **Asset Import**
   - CAD / URDF → USD 변환
2. **Scene 구성**
   - Physics 추가
   - Joint / Drive 설정
   - Collision Mesh 정의
   - Sensor(Camera, LiDAR 등) 추가
3. **Interaction**
   - Python Script (VS Code)
   - OmniGraph (노드 기반 로직)
   - Extensions 활용

---

## 8. 주요 개념 정리

### 8.1 기본 단위
- **Prim**: Scene Tree의 최소 단위
- **Stage**: 전체 시뮬레이션 월드
- **Scene**: 물리 시뮬레이션이 적용되는 공간

### 8.2 좌표 및 변환
- **Xform**
  - 위치, 회전, 스케일
  - TF와 동일한 개념

### 8.3 물리 구성 요소
- **Mesh**: 시각적 형상
- **Collider**: 충돌 영역
- **Rigid Body**: 물리 법칙 적용 대상
- **Articulation**: 관절로 연결된 로봇 구조

### 8.4 그래프 기반 로직
- **Action Graph / OmniGraph**
  - 노드 기반 로직 구성
  - ROS 연동, 센서 데이터 흐름 제어

---

## 9. 실무 이슈 사례
- 로봇이 벽이나 컨베이어를 통과하는 문제
  - Collider 미설정
  - Rigid Body 누락
- 해결:
  - Mesh + Collider + Rigid Body 설정 확인 필수

---

## 10. 프로젝트 관점 정리
- 문제 정의 → DT 기반 해결 방안 제시
- 시뮬레이션 결과를 통해 효율성 판단
- 불필요한 연출 제거, 핵심 기능 중심 시연

---

## 11. d1 파일 소개
- 1. air_to_air.usd : air_to_air.webm의 usd 파일
- 2. air_to_air.webm : 버튼 만들어 보려고 했는데 이상하게 닿지도 않은 일정 거리에서 충돌 발생. 원인 궁금해서 찍어둠.
- 3. domino.usd : 기본 도미노 동작 만들어본 usd 파일
- 4. domino_answer.usd : 심화 도미노 동작을 extension 워크플로우(스크립트 에디터)로 작성한 usd 파일
- 5. domino_answer.py : domino_answer.usd 파일의 스크립트 에디터로 작성한 code
- 6. environments 폴더 : Nvidia 기본 제공 environments 촬영 영상 (프로젝트 시간 제약 상, 이를 활용하는 것이 best일 것으로 판단하였음.)
  - (1) hospital, office, rivermark는 로딩이 굉장히 오래 걸리는 것과 리소스 상태, 시뮬레이션 환경을 파악한 결과 굉장히 무거운 environments로 인식됨. 다른 enviroments 중 골라 사용하는 것이 시간을 줄일 수 있는 방법이나, 주제에 따라 필요한 것만 떼와 사용하는 식으로 리소스를 최소화시키는 것 또한 고려하고 있음.
  - (2) Grid, jetracer는 plane을 포함하지 않는 반면, Terrains은 오직 plane, slope, stairs 구조물만을 포함함.
  - (3) Modular_Warehouse는 기본 구조를 포함하지 않음.